menu "Storage / SD card"

config SD_SPI_MOSI_IO
    int "GPIO MOSI pour le bus SPI microSD"
    range 0 48
    default 11
    help
        Broche MOSI (COPI) du bus SDSPI connecté au lecteur microSD de la carte
        Waveshare ESP32-S3 Touch LCD 7B. La valeur par défaut reflète le
        routage d'usine (GPIO11).

config SD_SPI_MISO_IO
    int "GPIO MISO pour le bus SPI microSD"
    range 0 48
    default 13
    help
        Broche MISO (CIPO) du bus SDSPI. Par défaut elle correspond au GPIO13
        présent sur la nappe TF.

config SD_SPI_SCLK_IO
    int "GPIO SCLK pour le bus SPI microSD"
    range 0 48
    default 12
    help
        Broche d'horloge SPI dédiée au lecteur microSD. La configuration
        standard Waveshare relie SCLK au GPIO12 de l'ESP32-S3.

config SD_AUTOMOUNT
    bool "Monter automatiquement la carte microSD au démarrage"
    default y
    help
        Lorsque cette option est activée, l'application tente de monter la
        carte microSD au démarrage afin de rendre les journaux et profils
        LVGL immédiatement disponibles. Désactiver l'option pour reporter le
        montage à une étape ultérieure de l'initialisation.

config SD_MOUNT_POINT
    string "Point de montage de la carte microSD"
    default "/sdcard"
    help
        Point de montage FAT exposé dans le VFS une fois la carte initialisée.
        Adapter si l'application doit publier le volume sous un répertoire
        différent.

config SD_USE_FALLBACK_GPIO_CS
    bool "Forcer CS microSD sur un GPIO natif"
    default y
    help
        Active la commande directe de la ligne chip-select microSD par un GPIO
        de l'ESP32-S3. Ce contournement est obligatoire avec l'extenseur
        CH422G, le bus I²C ne pouvant être sollicité depuis les callbacks ISR
        du driver SDSPI.

config SD_SPI_CS_IO
    int "GPIO utilisé pour la ligne CS microSD"
    range 0 48
    default 34
    help
        Numéro de GPIO employé pour piloter la ligne CS du lecteur microSD.
        Sur la Waveshare ESP32-S3 Touch LCD 7B, la broche 34 est accessible sur
        le connecteur d'extension et ne rentre pas en conflit avec le bus RGB.

config SD_FALLBACK_CS_GPIO
    int
    default SD_SPI_CS_IO
    help
        Alias rétrocompatible. Utiliser SD_SPI_CS_IO pour configurer la broche
        CS du bus SDSPI.

endmenu

