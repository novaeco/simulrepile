menu "SimulRepile Application Configuration"

config APP_MAX_TERRARIUMS
    int "Maximum number of terrariums"
    range 1 8
    default 4
    help
        Defines how many terrariums can be simulated simultaneously.
        Keep this value aligned with the UI layout (4 slots maximum).

config APP_AUTOSAVE_INTERVAL_S
    int "Autosave interval (seconds)"
    range 30 3600
    default 120
    help
        Interval between automatic persistence operations. Values below
        30 seconds may impact SD throughput without benefit.

config APP_ENABLE_COMPRESSION
    bool "Enable save data compression"
    default n
    help
        Activate the optional compression backend defined in
        components/compression_if. Disable to simplify debugging of
        JSON save payloads.

config APP_ENABLE_WIFI_OTA
    bool "Enable Wi-Fi OTA updates"
    default n
    help
        Allow firmware upgrades through Wi-Fi in addition to SD card
        based updates. Requires Wi-Fi credentials management.

config APP_ENABLE_TTS_STUB
    bool "Enable TTS stub"
    default n
    help
        Provide a stub Text-To-Speech hook for accessibility testing.
        Implementations can be swapped at runtime through the settings
        screen.

config APP_LANG_DEFAULT
    string "Default language (ISO 639-1 code)"
    default "fr"
    help
        ISO 639-1 language code loaded during the first boot. Users can
        switch language at runtime through the settings screen.

config APP_THEME_HIGH_CONTRAST
    bool "Enable high-contrast theme by default"
    default y
    help
        Enables the accessible color palette on first boot. Users may
        revert to the standard theme from the settings screen.

config APP_ASSET_CACHE_CAPACITY
    int "Asset cache capacity (entries)"
    range 1 128
    default 8
    help
        Maximum number of assets simultaneously kept in PSRAM by the
        /sdcard-backed cache. Entries above this limit are evicted based
        on a least-recently-used policy with periodic idle sweeps.

menu "Core Link Bridge"

config APP_CORE_LINK_UART_PORT
    int "UART port used for the core link"
    range 0 2
    default 1
    help
        Select the UART controller used to communicate with the
        ESP32-S3-DevKitC core board. UART1 is routed to GPIO43/GPIO44 on
        the Waveshare carrier and is free by default.

config APP_CORE_LINK_UART_TX_PIN
    int "Core link UART TX GPIO"
    default 43
    help
        GPIO driving the TX line towards the DevKitC bridge. Adapt this
        value if you re-route the differential pair via the CH422G or a
        mezzanine connector.

config APP_CORE_LINK_UART_RX_PIN
    int "Core link UART RX GPIO"
    default 44
    help
        GPIO receiving data from the DevKitC bridge. Make sure the pin is
        not reused by the LCD or SD peripheral when rewiring the board.

config APP_CORE_LINK_UART_BAUD
    int "Core link UART baud rate"
    range 115200 4000000
    default 2000000
    help
        Serial baud rate for the master<->display RPC channel. 2 Mbps
        provides a good balance between throughput and signal integrity
        over short ribbon cables.

config APP_CORE_LINK_HANDSHAKE_TIMEOUT_MS
    int "Core link handshake timeout (ms)"
    range 100 60000
    default 5000
    help
        Maximum duration to wait for the DevKitC to acknowledge the
        display endpoint during boot. If the timeout expires the display
        falls back to local stubs.

config APP_CORE_LINK_STATE_TIMEOUT_MS
    int "Core link state watchdog timeout (ms)"
    range 500 60000
    default 4000
    help
        Maximum delay tolerated between two STATE_FULL frames coming
        from the DevKitC. When the timeout expires the display endpoint
        probes the link with a ping and eventually falls back to the
        internal simulation if the DevKitC stays silent.

config APP_CORE_LINK_PING_TIMEOUT_MS
    int "Core link ping response timeout (ms)"
    range 100 5000
    default 800
    help
        Duration to wait for a PONG response after emitting a watchdog
        PING when the DevKitC stops publishing STATE_FULL frames. If the
        timeout expires the bridge is considered lost and the UI falls
        back to the local simulator while displaying an alert banner.

endmenu

menu "Board Support Package Options"

choice BSP_SD_BUS_WIDTH
    prompt "SD bus width"
    default BSP_SD_BUS_WIDTH_1BIT
    help
        Select the data bus width for the SD/MMC interface. 1-bit is the
        safe default for wiring simplicity; 4-bit provides higher
        throughput when all data lines are available.

config BSP_SD_BUS_WIDTH_1BIT
    bool "1-bit"

config BSP_SD_BUS_WIDTH_4BIT
    bool "4-bit"
endchoice

config BSP_USB_CAN_SELECTABLE
    bool "Allow runtime USB/CAN selection"
    default y
    help
        Exposes the CH422G EXIO5 line allowing the user to switch
        between native USB (CDC) and CAN functionality from the
        settings screen.

endmenu

endmenu
